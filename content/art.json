{
  "entries": [
    {
      "slug": "dot-field",
      "title": {
        "en": "Dot Field",
        "ja": "Dot Field（ドットフィールド）"
      },
      "summary": {
        "en": "A deep dive into the homepage dot field — how each mode bends the grid and why the motion feels alive.",
        "ja": "ホームページのドットフィールドがなぜ生き物のように動くのか、モードごとの振る舞いを徹底解説。"
      },
      "content": {
        "en": "<p>An upcoming explanation of the dot field.</p>",
        "ja": "<h1>ドットフィールドの隠された振付</h1>\n<p>プラネタリウムの星座が天井を無視して自分の周りを回り、重力のささやきを動きで伝えてくる——ホームページのドットフィールドは、そんな感覚を届けるために設計されています。シェーダーの数学、応答性の高い振付、見る人への共感を同じ比率で混ぜ込んだパフォーマンスです。</p>\n<h2>舞台裏を支えるキャスト</h2>\n<ul>\n<li><strong>SceneCanvas</strong>（<code>components/SceneCanvas.jsx</code>）は舞台監督と照明を兼任。90ユニット間隔の70×70点（計4,900）グリッドを生成し、その動きをカスタム<code>THREE.Points</code>シェーダーに渡します。各ドットは<code>gl_PointCoord</code>や加算合成、輝度とサイズのユニフォームを使って柔らかな円盤として描画されます。</li>\n<li><strong>FIELD_DEFAULT_BASE</strong>（<code>lib/fieldDefaults.js</code>）は波の周波数、リップル減衰、渦の強さ、ポイントサイズ、フォグ密度など“ハウスバンド”の初期設定を定義します。エフェクト終了後に戻る基準値です。</li>\n<li><strong>FIELD_DEFAULT_INFLUENCES</strong>はチャンネルごとの味付け。<code>/projects</code>や<code>/sounds</code>に遷移してもアニメーション全体は変えず、グリッドのムードをコンテンツに合わせて調律します。</li>\n<li><strong>SceneCanvasのステートマシン</strong>はポインターのエネルギー、リップルキュー、モード固有データ、デスクトップ／モバイルのカメラ設定を監視。次に響かせるセクションを把握した指揮者のスコアのように全体を統率します。</li>\n</ul>\n<h2>動きの仕組み</h2>\n<p>ドットフィールドの土台には3つのサイン波が重なっています。X軸を進む波、Y軸にオフセットされた波、そしてグリッドを包む放射状の渦。潮の満ち引きと龍の呼吸を足したようなリズムが生まれ、その上に以下の要素が加わります。</p>\n<ul>\n<li>ポインターの動きはワールド座標に変換され、ライブエネルギーメーターに蓄積。急な操作でエネルギーが跳ね上がり、停止すると<code>pointer.energy = pointer.energy * 0.92 - 0.002</code>で減衰します。スケートボードで滑らかにカービングするほど勢いが続く感覚に近いです。</li>\n<li>クリックすると指数関数的に減衰するリップルをキューに追加。各リップルは年齢・距離・強度を追跡し、8秒後に消えます。池に小石を投げ入れた波紋や、ゴングの余韻が溶ける様子を想像してください。</li>\n<li>カメラは穏やかな自動操縦でポインター方向へ lerp。係数0.04〜0.045の滑らかな追従で、ステディカムが次のビートを予感するような移動になります。</li>\n</ul>\n<h2>エフェクトライブラリ：9つの別宇宙</h2>\n<p>Zen、Jitter、Reaction Diffusion、Starfield、Harmonic Pendulum、Mandelbrot Zoomなど複数のエフェクト定義を収録し、発動すると4つのフェーズが走ります。</p>\n<ol>\n<li><strong>init</strong>：ペンデュラム角やグレイ・スコットバッファなどモード固有メモリを初期化。</li>\n<li><strong>start</strong>：明るさや振幅、リップル挙動といったグローバル設定を再調整。</li>\n<li><strong>update</strong>：各フレームで固有状態を進行させます。</li>\n<li><strong>perPoint</strong>：粒子ごとのオフセット、スケール、ライティングを注入。</li>\n</ol>\n<p>ゲスト指揮者がスコアを解釈し直すように、各モードが同じテーマを独自に奏でます。Harmonic Pendulumは3つの二重振り子を合算してカオティックな波を生成し、River Runは斜めのサイン波とフラクタルノイズで渦流を描きます。Starfieldはドットを擬似Z軸に浮かせ星雲のように瞬かせ、Mandelbrot Zoomは32回の反復で境界線を呼吸のように膨張させます。</p>\n<h2>滑らかさの秘密</h2>\n<p>なめらかな体感は複数のイージング判断から生まれます。</p>\n<ul>\n<li><strong>ターゲット値とライブ値</strong>：<code>settings[key] += (targetSettings[key] - settings[key]) * 0.05</code>で徐々に近づけ、スイッチではなくフェーダーで照明を調整するような変化に。</li>\n<li><strong>随所に仕込んだエンベロープ</strong>：<code>smoothStep</code>や独自の<code>computeEffectEase</code>でフェードイン・アウトを制御。エンディングは合唱曲のコーダのように柔らかく閉じます。</li>\n<li><strong>ポインター減衰</strong>：操作中は勢いが生まれ、止めると砂のように静まる指数減衰で、自然な手触りを維持。</li>\n<li><strong>遅延クリア</strong>：時間指定の効果が終わると2.5秒かけて寄与を減衰させ、UIのトランジションと足並みを揃えます。</li>\n<li><strong>レスポンシブカメラ</strong>：デスクトップとモバイルで軌道を切り替え、<code>matchMedia('(max-width: 640px)')</code>が即座にプロファイルを交換します。</li>\n</ul>\n<h2>ビジュアルチューニングと読みやすさ</h2>\n<ul>\n<li>シェーダーは1/4半径の外側を捨て、<code>smoothstep</code>で縁を柔らかく。レトロCRTのような柔光を得つつブロックノイズを回避します。</li>\n<li>色はグレースケールながら、高さに応じてコントラストと明度を変化。波頭に近いドットほど大きく明るくなり、ダンサーを追うスポットライトのようです。</li>\n<li>加算合成とReinhardトーンマッピングでハイライトを伸ばしつつ中間調を維持。囁き声とシャウトが共存する音楽の圧縮に似ています。</li>\n<li><code>prefers-reduced-motion</code>を尊重し、読み込み時は安定状態へ即座に遷移してフラッシュを防ぎます。</li>\n</ul>\n<h2>ビジュアルのヒント</h2>\n<ul>\n<li>俯瞰から基本グリッドを撮影し、X/Y波の層を等高線のように注釈。</li>\n<li>リップルの伝播をGIFで記録し、水面の同心円図を重ねて解説。</li>\n<li>エフェクトメニューを「ゲスト指揮者」のポスターに見立て、モードと波形アイコンを並置。</li>\n<li>標準ビューと<code>prefers-reduced-motion</code>版を並べ、共感的な読み込み経路を示します。</li>\n</ul>\n<h2>共有したい技術メモ</h2>\n<ul>\n<li>Perlinの置換テーブルは512エントリを事前計算し、River Runのような流れのある効果を毎フレームの割り当てなしで駆動。</li>\n<li>リップルキューは20件で上限を設け、古いものは8秒後に消去して長時間でも負荷を安定化。</li>\n<li><code>frustumCulled = false</code>で極端なカメラ角度でもグリッドが突然消えないようにしています。</li>\n<li>Stats.jsのフックは通常非表示ですが、モード調整時にはすぐ呼び出せる状態で待機。</li>\n<li>初期化直後（あるいはモーション削減ユーザー向けには即座に）<code>.is-ready</code>クラスを付与し、CSSのアニメーションとWebGLの準備完了を同期させます。</li>\n</ul>\n<h2>なぜ心地よく感じるのか</h2>\n<p>ドットフィールドの魔法は特定の波形ではなく、ポインターエネルギーやリップル、エフェクトの包絡線、カメラ補間といったシステム全体が共感に傾いている点にあります。ジャズピアニストがテーマを変奏するように、ユーザーの入力を解釈して各モードが輝く余白を確保します。</p>\n<p>料理で言えばレシピではなく、使い込まれた鋳鉄フライパン。数学と磨き上げた手触りが何層にも重なり、次の演奏をもっと豊かにします。Zenモードで瞑想的に漂う時も、Jitterで花火を咲かせる時も、このパンは常に温かく招き入れてくれます。</p>\n<h2>これから試したい改良案</h2>\n<ul>\n<li><strong>GPUインスタンシング</strong>：小さなテクスチャアトラスを用いたインスタンス描画で、光尾や六角形パーティクルを低コストに追加。</li>\n<li><strong>WebGL2フレームバッファ</strong>：副次的なシミュレーションをフレームバッファにキャッシュし、メインシェーダーがサンプリングする構成でCPUとGPU間の往復を削減。</li>\n<li><strong>オーディオリアクティブ化</strong>：Web Audio APIのFFTデータをインフルエンスマップに流し込み、低音でリップルを発火させるなど音との連携を強化。</li>\n<li><strong>グリッド密度の適応制御</strong>：端末性能に応じて<code>AMOUNTX</code>/<code>AMOUNTY</code>や<code>SEPARATION</code>を調整し、ローエンド機でも滑らかさを維持しつつデスクトップでは密度を上げる。</li>\n<li><strong>ジェスチャーの記憶</strong>：直近10秒のポインター軌跡をバッファに保持し、アイドル時にゴーストとして再生。</li>\n<li><strong>エディタUXの磨き込み</strong>：プリセット一覧にスパークラインを添えて波形を視覚化し、再生前の「試聴」をできるようにする。</li>\n</ul>\n<p>次のエフェクトを仕立てるときは、単にピクセルを動かすのではなく、この小さな点たちを踊りに誘っているのだと意識してください。</p>"
      },
      "tags": {
        "en": [
          "generative art",
          "shader",
          "dot field"
        ],
        "ja": [
          "ジェネレーティブアート",
          "シェーダー",
          "ドットフィールド"
        ]
      },
      "coverImage": {
        "url": "https://irq8pcmcsnz9tzjh.public.blob.vercel-storage.com/2025-10-30-at-17-03WqlguBExAyShe0BIeNPdLXCZanxb.jpg",
        "alt": "2025 10 30 at 17"
      },
      "status": "published",
      "createdAt": "2024-12-15",
      "updatedAt": "2025-10-30T10:10:43.943Z"
    }
  ]
}
